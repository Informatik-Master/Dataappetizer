<nb-stepper
  orientation="horizontal"
  [disableStepNavigation]="true"
  [selectedIndex]="selectedIndex"
>
  <nb-step label="Systemname">
    <nb-card>
      <nb-card-header>
        <h2>Wählen Sie einen Namen für das Kundensystem</h2>
      </nb-card-header>
      <nb-card-body>
        <input
          nbInput
          fullWidth
          placeholder="Systemname"
          [(ngModel)]="systemName"
        />
      </nb-card-body>
      <nb-card-footer style="display: flex; justify-content: end; gap: 15px">
        <button nbButton status="primary" (click)="next()">Weiter</button>
      </nb-card-footer>
    </nb-card>
  </nb-step>
  <nb-step label="Zugänge">
    <nb-card>
      <nb-card-body> </nb-card-body>
      <nb-card-footer style="display: flex; justify-content: end; gap: 15px">
        <button nbButton status="secondary" (click)="previous()">Zurück</button>
        <button nbButton status="primary" (click)="next()">Weiter</button>
      </nb-card-footer>
    </nb-card>
  </nb-step>
  <nb-step label="Datenvisualisierung">
    <nb-card>
      <nb-card-body style="padding: 0">
        <nb-layout class="transparent fullheight">
          <nb-layout-column>
            <nb-tabset>
              <nb-tab tabTitle="Allgemeiner Überblick">
                <nb-list>
                  <nb-list-item
                    *ngFor="let dashboardConfig of dashboardConfigs"
                    style="gap: 5px"
                    (mouseenter)="loadVisualization(dashboardConfig)"
                  >
                    <nb-checkbox
                      [(checked)]="dashboardConfig.selected"
                    ></nb-checkbox
                    >{{ dashboardConfig.name }}
                  </nb-list-item>
                </nb-list>
              </nb-tab>
              <nb-tab tabTitle="Fahrzeugübersicht">
                <nb-list> </nb-list>
              </nb-tab>
            </nb-tabset>
          </nb-layout-column>
          <nb-layout-column>
            <ng-template visualizationHost></ng-template>
          </nb-layout-column>
        </nb-layout>
      </nb-card-body>
      <nb-card-footer style="display: flex; justify-content: end; gap: 15px">
        <button nbButton status="secondary" (click)="previous()">Zurück</button>
        <button nbButton status="primary" (click)="next()">Weiter</button>
      </nb-card-footer>
    </nb-card>
  </nb-step>
  <nb-step label="Fertig">
    <nb-card>
      <nb-card-body>
        <h2>Ihr System ist bereit</h2>
        <!--TODO: Hier sollte schon gespeichert sein-->
        <div>
          <div>
            <label for="webhook">Push-Url</label>
            <nb-form-field>
              <input
                id="webhook"
                nbInput
                fullWidth
                readonly
                [value]="'localhost:3001/webhook'"
              />
              <button
                nbSuffix
                nbButton
                ghost
                (click)="copyToClipboard('localhost:3001/webhook')"
              >
                <nb-icon [icon]="'clipboard-outline'" pack="eva"> </nb-icon>
              </button>
            </nb-form-field>
          </div>

          <div>
            <label for="secret">Secret</label>
            <nb-form-field>
              <input
                id="secret"
                nbInput
                fullWidth
                readonly
                [value]="'abc123def456'"
              />
              <button
                nbSuffix
                nbButton
                ghost
                (click)="copyToClipboard('abc123def456')"
              >
                <nb-icon [icon]="'clipboard-outline'" pack="eva"> </nb-icon>
              </button>
            </nb-form-field>
          </div>
        </div>
        <button nbButton status="primary" (click)="finish()">Zum System</button>
      </nb-card-body>
    </nb-card>
  </nb-step>
</nb-stepper>
